services:
  - name: broker
    command: node
    args:
      - packages/broker/dist/cli.js
      - --address
      - 127.0.0.1:50051
    cwd: ../..
    env: {}
    restart: always
    maxRestarts: 5
    restartDelay: 3000
    restartOnUnexpectedExit: true
    logColor: blue
  - name: calculator-server
    command: node
    args:
      - apps/calculator-server/dist/calculator-server.js
      - --address
      - 127.0.0.1:5555
      - --broker-address
      - 127.0.0.1:50051
    cwd: ../..
    env: {}
    restart: always
    maxRestarts: 5
    restartDelay: 3000
    restartOnUnexpectedExit: true
    logColor: cyan
  - name: calculator-client
    command: node
    args:
      - apps/calculator-client/dist/calculator-client.js
      - --broker-address
      - 127.0.0.1:50051
    cwd: ../..
    env: {}
    restart: always
    maxRestarts: 5
    restartDelay: 3000
    restartOnUnexpectedExit: true
    logColor: green
  - name: calculator-client-rust
    command: pnpm
    args:
      - -C
      - apps/calculator-client-rust
      - start
      - --broker-address
      - 127.0.0.1:50051
    cwd: ../..
    env: {}
    restart: always
    maxRestarts: 5
    restartDelay: 3000
    restartOnUnexpectedExit: true
    logColor: magenta
  - name: calculator-client-cpp
    command: pnpm
    args:
      - -C
      - apps/calculator-client-cpp
      - start
      - --broker-address
      - 127.0.0.1:50051
    cwd: ../..
    env: {}
    restart: always
    maxRestarts: 5
    restartDelay: 3000
    restartOnUnexpectedExit: true
    logColor: yellow

ui:
  refreshRate: 1000
  mode: manual
